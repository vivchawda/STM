STMicroelectronics assembler v4.52   (C)1987-2015   Wed Jun 03 22:17:52 2015
Page 1  Assembler
                                               d:\stm\blink_test\main.asm

   1                         stm8/     
   2                         
   0  000000                                 #include "mapping.inc" 
   1                                                          ;-------------------------------
                                                                ;-----------------------
   2                                                          ; SEGMENT MAPPING FILE 
                                                                ;AUTOMATICALLY GENERATED BY 
                                                                ;STVD
   3                                                          ; SHOULD NOT BE MANUALLY 
                                                                ;MODIFIED.
   4                                                          ; CHANGES WILL BE LOST WHEN FILE
                                                                ; IS REGENERATED.
   5                                                          ;-------------------------------
                                                                ;-----------------------
   6  000000                                 #define  RAM0 1
   7  000000                                 #define  ram0_segment_start 0
   8  000000                                 #define  ram0_segment_end FF
   9  000000                                 #define  RAM1 1
  10  000000                                 #define  ram1_segment_start 100
  11  000000                                 #define  ram1_segment_end 1FF
  12  000000                                 #define  stack_segment_start 200
  13  000000                                 #define  stack_segment_end 3FF
<END_OF_INCLUSION>
   4                         
   5                                   segment  'rom'
   6                         
   7                         start     
   8  000000   AE03FF                        ldw      X,#$3FF       ; initialize SP
   9  000003   94                            ldw      SP,X
  10                         
  11  000004   AE0000                        ldw      X,#$0         ; clear all the ram
  12                         clear_ram  
  13  000007   7F                            clr      (X)
  14  000008   5C                            incw     X
  15  000009   A303FF                        cpw      X,#$3FF
  16  00000C R 23F9                          jrule    clear_ram
  17                                   
  18  00000E   721E500C                      bset     $500C,#7      ; init our program
  19                         loop_forever  
  20  000012   AEFFFF                        ldw      X,#$FFFF 
  21                         loop_delay  
  22  000015   9D                            nop      
  23  000016   5A                            decw     X
  24  000017 R 26FC                          jrne     loop_delay
  25  000019   901E500C                      bcpl     $500C,#7 
  26  00001D R 20F3                          jra      loop_forever
  27                         
  28                         
  29                         ; the default interupt handler
  30  00001F R                               interrupt NonHandledInterrupt
  31                         NonHandledInterrupt  
  32  00001F   80                            iret     
  33                         
  34                         ; the interupt table
  35                                   segment  'vectit'
  36  000000 R 00000000                      dc.l     {$82000000+start}   ; reset
  37  000004 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; trap
  38  000008 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq0
STMicroelectronics assembler v4.52   (C)1987-2015   Wed Jun 03 22:17:52 2015
Page 2  Assembler
                                               d:\stm\blink_test\main.asm

  39  00000C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq1
  40  000010 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq2
  41  000014 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq3
  42  000018 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq4
  43  00001C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq5
  44  000020 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq6
  45  000024 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq7
  46  000028 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq8
  47  00002C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq9
  48  000030 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq10
  49  000034 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq11
  50  000038 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq12
  51  00003C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq13
  52  000040 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq14
  53  000044 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq15
  54  000048 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq16
  55  00004C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq17
  56  000050 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq18
  57  000054 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq19
  58  000058 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq20
  59  00005C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq21
  60  000060 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq22
  61  000064 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq23
  62  000068 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq24
  63  00006C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq25
  64  000070 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq26
  65  000074 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq27
  66  000078 R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq28
  67  00007C R 00000000                      dc.l     {$82000000+NonHandledInterrupt}   ; irq29
  68                         
  69  000080                                 end      
STMicroelectronics assembler v4.52   (C)1987-2015   Wed Jun 03 22:17:52 2015
Page 3  Assembler
                                               d:\stm\blink_test\main.asm

Symbol Name                       Value     Call       Type  Scope      Rel.  Line  Privacy  Segment   Size  Bytes File

NonHandledInterrupt                   001F  interrupt  WORD  Internal   rel     31  private  text         1     0  -

clear_ram                             0007         no  WORD  Internal   rel     12  private  text        11     0  -

loop_forever                          0012         no  WORD  Internal   rel     19  private  text         3     0  -
loop_delay                            0015         no  WORD  Internal   rel     21  private  text        10     0  -

start                                 0000         no  WORD  Internal   rel      7  private  text         7     0  -


5 labels
No errors on assembly of 'd:\stm\blink_test\main.asm'